(()=>{var o={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},d:(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var t=o.n(e);const n=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/components/DiscussionListItem"];var a=o.n(r);const c=flarum.core.compat["forum/components/DiscussionPage"];var s=o.n(c);const i=flarum.core.compat["common/components/TextEditor"];var l=o.n(i);const u=flarum.core.compat["common/components/TextEditorButton"];var f=o.n(u);const d=flarum.core.compat["common/components/Button"];var p=o.n(d);const b=flarum.core.compat["common/utils/abbreviateNumber"];var h=o.n(b);const g=flarum.core.compat["common/helpers/icon"];var v=o.n(g);const k=flarum.core.compat["common/utils/classList"];var x=o.n(k);const y=flarum.core.compat["common/utils/styleSelectedText"];var z=o.n(y),I="zhihe.postFontSize",q="normal";function L(o){document.body.classList.remove("zhihe-font-large","zhihe-font-larger"),"large"===o?document.body.classList.add("zhihe-font-large"):"larger"===o&&document.body.classList.add("zhihe-font-larger"),localStorage.setItem(I,o),q=o}t().initializers.add("zhihe-ui",function(){var o=t().session&&t().session.user;L(o&&o.preferences()&&o.preferences()[I]||localStorage.getItem(I)||"normal"),(0,n.extend)(a().prototype,"infoItems",function(o){var e=this.attrs.discussion,t=e.replyCount(),n=e.isUnread();o.add("mobile-reply-count",m("span",{className:x()("item-mobile-reply-count",{unread:n}),onclick:n?this.markAsRead.bind(this):void 0},[v()(n?"fas fa-comment":"far fa-comment")," ",h()(t)]),10)});var e={normal:"A",large:"A+",larger:"A++"},r={normal:"large",large:"larger",larger:"normal"};(0,n.extend)(s().prototype,"sidebarItems",function(o){o.add("fontSizeToggle",p().component({className:"Button Button--block",icon:"fas fa-font",onclick:function(){var o,e=r[q];L(e),t().session&&t().session.user&&t().session.user.savePreferences(((o={})[I]=e,o)),m.redraw()}},"字体 "+e[q]),4)}),(0,n.extend)(l().prototype,"toolbarItems",function(o){var e=this,t=function(){return e.attrs.composer.editor},n=function(o,e){return function(){return z()(t().el,{prefix:o,suffix:e,trimFirst:!0})}};o.add("bb-bold",f().component({title:"粗体 [b]",icon:"fas fa-bold",onclick:n("[b]","[/b]")}),900),o.add("bb-italic",f().component({title:"斜体 [i]",icon:"fas fa-italic",onclick:n("[i]","[/i]")}),800),o.add("bb-underline",f().component({title:"下划线 [u]",icon:"fas fa-underline",onclick:n("[u]","[/u]")}),700),o.add("bb-strikethrough",f().component({title:"删除线 [s]",icon:"fas fa-strikethrough",onclick:n("[s]","[/s]")}),600),o.add("bb-quote",f().component({title:"引用 [quote]",icon:"fas fa-quote-left",onclick:n("[quote]","[/quote]")}),500),o.add("bb-link",f().component({title:"链接 [url]",icon:"fas fa-link",onclick:function(){return z()(t().el,{prefix:"[url=https://]",suffix:"[/url]",trimFirst:!0})}}),400),o.add("bb-size",f().component({title:"字号 [size]",icon:"fas fa-text-height",onclick:n("[size=18]","[/size]")}),300)})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map